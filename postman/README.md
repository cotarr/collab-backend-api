# Instruction to use postman

- Import this collection from repository
- Set local variables

## Local variables

Note: redirect must be different from auth_host

The development version listed below can be imported directly into postman from "collab-auth Backend.postman_environment.json"

- auth_host      (http://127.0.0.1:3500)
  frontend_host  (http://localhost:3000)
- backend_host   (http://localhost:4000)
- redirect       (http://localhost:3000/login/callback)
- user_username  (bob)
- user_password  (bobssecret)
- client_id      (abc123)
- client_secret  (ssh-secret)
- client_base64  (YWJjMTIzOnNzaC1zZWNyZXQ=)

## Getting a token from auth server

- Select Collection, then select collection Authorization tab
- The following arguments are populated from local variables
 - Grant Type: Authorization Code
 - Callback URL: {{redirect_uri}}
 - Authorize using browser NOT checked.
 - Auth URL: {{auth_host}}/dialog/authorize
 - Access Token URL: {{auth_host}}/oauth/token
 - Client Id: {{client_id}}
 - Client Secret: {{client_secret}}
 - Scope: api.read
- Press: Get New Access Token
- When prompted enter username and password
- When window opens, select: Use Token
- The postman test can now inherit this token from parent collection.

# Operation

The collab-backend-api is set to emulate a REST API with one data table "iot-data".
This table holds mock data records generated by an emulated IOT device using
repository collab-iot-device. The web page in the repository "collab-frontend"
can then fetch and display the data that was submitted by the IOT device.

The only one table exists in the emulated database and it supports POST requests
to enter new records. It also accepts GET requests to list all records in the table.
The current maximum is 10 records. To retrieve the records the token must have
scope "api.read" or "api.write". The create new records, the token must
have scope "api.write".

Using postman, both of these functions can be emulated.
